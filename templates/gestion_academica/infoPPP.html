{% extends "/gestion_academica/index.html" %}
{% block titulo %} Gestión de Prácticas Preprofesionales {% endblock %}
{% block contenido %}
<nav style="--bs-breadcrumb-divider: '>'" aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{{ url_for('router_main.index') }}">Inicio</a></li>
        <li class="breadcrumb-item active"><a href="{{ url_for('router_main.gestion_academica') }}">Módulo de Gestión Académica</a></li>
        <li class="breadcrumb-item active" aria-current="page">Prácticas Preprofesionales</li>
    </ol>
</nav>

<div class="container-fluid my-4">
    <div class="card w-100" id="card_practicas">
        <div class="card-header bg-red-usat text-white">
            Prácticas Preprofesionales
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table id="tabla-ppp" class="table table-striped tabla-ppp" style="width:100%">
                    <thead>
                        <tr>
                            <th style="text-align:center">Estudiante</th>
                            <th style="text-align:center">Empresa o Institución</th>
                            <th style="text-align:center">Práctica Preprofesional</th>
                            <th style="text-align:center">Docente</th>
                            <th style="text-align:center">Carrera</th>
                            <th style="text-align:center">Opciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Los datos de las prácticas se cargarán dinámicamente aquí -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

{% block scripts %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
<script>
    $(document).ready(function () {
        var table = $('#tabla-ppp').DataTable({
            paging: true,
            info: false,
            responsive: true,
            autoWidth: true,
            searching: true,
            scrollY: "510px",
            ajax: {
                url: "{{ url_for('router_ppp.datos_ppp') }}",
                type: "GET",
                dataSrc: ""
            },
            columns: [
                { data: "estudiante" },
                { data: "empresa" },
                { data: "fecha_inicio" },
                { data: "docente" },
                { data: "carrera" },
                {
                    data: null,
                    className: 'text-center',
                    render: function (data, type, row) {
                        return `
                            <button class="btn btn-primary btn-sm btnVer" data-id="${row.idPractica}" title="Ver"><i class="fas fa-eye"></i></button>
                            <button class="btn btn-warning btn-sm btnModificar" data-id="${row.idPractica}" title="Modificar"><i class="fas fa-pencil-alt"></i></button>
                            <button class="btn btn-danger btn-sm btnEliminar" data-id="${row.idPractica}" title="Eliminar"><i class="fas fa-times"></i></button>
                        `;
                    }
                }
            ],
            language: {
                url: "//cdn.datatables.net/plug-ins/1.13.7/i18n/es-ES.json"
            }
        });
    });
</script>
{% endblock %}
{% endblock %}
