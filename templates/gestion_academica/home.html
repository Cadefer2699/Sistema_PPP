<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="shortcut icon" href="{{ url_for('static', filename='dashboard/img/icons/usat_logo_red.jpg') }}" />
    <title>USAT - {% block titulo %}{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='dashboard/css/app.css') }}" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.3/css/dataTables.dataTables.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs5/dt-2.0.3/datatables.min.css" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
	<link rel="stylesheet" href="https://cdn.datatables.net/rowreorder/1.5.0/css/rowReorder.bootstrap5.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/responsive/3.0.2/css/responsive.bootstrap5.css">
	<script src="/static/js/jquery-1.8.2.min.js"></script>
</head>
<style>
    .avatar {
            width: 40px; /* Ajusta el tamaño de la imagen según sea necesario */
            height: 40px; /* Ajusta el tamaño de la imagen según sea necesario */
            border-radius: 50%; /* Hace la imagen circular */
            border: 2px solid black; /* Aplica un borde blanco delgado */
            object-fit: cover; /* Asegura que la imagen se ajuste al contenedor */
            background-color: lightgray;
        }
    body{
        overflow: hidden;
    }
    
</style>
<body>
    <div class="wrapper">
        <!-- Pantalla de carga -->
        <div id="loader" class="loader-wrapper">
            <div class="loader"></div>
        </div>

        <!-- Menú Lateral (Sidebar) -->
        {% block sidebar %}
        <nav id="sidebar" class="sidebar js-sidebar">
            <div class="sidebar-content js-simplebar">
                <a class="sidebar-brand" href="{{ url_for('router_main.index') }}">
                    <img src="{{ url_for('static', filename='login/images/usat_logo_atrás.png') }}" alt="logoescuela"
                        style="max-width: 160px; display: flex;">
                </a>

                <ul class="sidebar-nav">
                    <li class="sidebar-header">
                        Módulo de Gestión Académica
                    </li>
                    <li class="sidebar-item">
                        <a class="sidebar-link" href="{{ url_for('router_main.estudiante') }}">
                            <i class="align-middle" data-feather="user"></i>
                            <span class="align-middle">Estudiante</span>
                        </a>
                    </li>

                    <li class="sidebar-item">
                        <a class="sidebar-link" href="{{ url_for('router_main.ppp') }}">
                            <i class="align-middle" data-feather="user"></i>
                            <span class="align-middle">PPP</span>
                        </a>
                    </li>

                    <li class="sidebar-item">
                        <a class="sidebar-link" href="{{ url_for('router_main.docente') }}">
                            <i class="align-middle" data-feather="user"></i>
                            <span class="align-middle">Docente</span>
                        </a>
                    </li>

                    <li class="sidebar-item">
                        <a class="sidebar-link" href="{{ url_for('router_facultad.facultad') }}">
                            <i class="align-middle" data-feather="user"></i>
                            <span class="align-middle">Facultad</span>
                        </a>
                    </li>

                    <li class="sidebar-item">
                        <a class="sidebar-link" href="{{ url_for('router_main.escuela') }}">
                            <i class="align-middle" data-feather="user"></i>
                            <span class="align-middle">Escuela</span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        {% endblock %}

        <!-- Contenido Principal -->
        <div class="main bg-grey-usat">
            <!-- Barra de Navegación Superior (Navbar) -->
            {% block navbar %}
            <nav class="navbar navbar-expand navbar-light navbar-bg sticky-top">
                <a class="sidebar-toggle js-sidebar-toggle">
                    <i class="hamburger align-self-center"></i>
                </a>
                <div class="navbar-collapse collapse">
                    <ul class="navbar-nav navbar-align">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle d-none d-sm-inline-block" href="#" data-bs-toggle="dropdown">
                                <img id="github-profile-pic" src="" alt="foto_perfil" class="avatar" />
                                <span id="usernamenav" class="text-dark fw-bold"></span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <a class="dropdown-item" href="{{ url_for('router_main.perfil') }}">
                                    <i class="align-middle me-1" data-feather="user"></i> Perfil
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" id="btnCerrarSesion" onclick="cerrarSesion()">Cerrar Sesión</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
            {% endblock %}

            <!-- Área de Contenido Dinámico -->
            <main class="content" id="container-body" style="padding: 15px;">
                {% block contenido %}{% endblock %}
            </main>

            <!-- Pie de Página (Footer) -->
            <footer class="footer">
                <div class="container-fluid">
                    <div class="row text-muted">
                        <div class="col-6 text-start">
                            <p class="mb-0">
                                <a class="text-muted" href="https://adminkit.io/" target="_blank"><strong>USAT</strong></a>
                                - <a class="text-muted" href="https://adminkit.io/" target="_blank"><strong>2024-I</strong></a> &copy;
                            </p>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Inclusión de Scripts -->

    <!-- jQuery (Versión Completa) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Popper.js (Necesario para Bootstrap) -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-zxRejdoFDcngA6sZ82AA4ZNZB8sEOB0lLw9/+8DkzjSmtLOqXiwj8ULjHzTp6NZO"
        crossorigin="anonymous"></script>

    <!-- Bootstrap JS (Versión 5.3.3) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <!-- DataTables JS (Si estás usando DataTables) -->
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>

    <!-- SweetAlert2 JS -->
    <script src="{{ url_for('static', filename='login/libs/sweetalert2/sweetalert2.js') }}"></script>

    <!-- Feather Icons (Si los estás usando) -->
    <script src="https://unpkg.com/feather-icons"></script>
    <script>
        feather.replace()
    </script>

    <!-- Script Inline para Cerrar Sesión -->
    <script>
        function cerrarSesion() {
            localStorage.clear();
            sessionStorage.clear();
            window.location.href = '/login';
        }

        document.addEventListener('DOMContentLoaded', function () {
            var fotoBase64 = localStorage.getItem('f') || sessionStorage.getItem('f');
            let usuario = localStorage.getItem('username') || sessionStorage.getItem('username');
            if (fotoBase64) {
                document.getElementById('github-profile-pic').src = 'data:image/jpeg;base64,' + fotoBase64;
            }
            if (usuario) {
                document.getElementById('usernamenav').textContent = usuario;
            }
        });
    </script>
    
    {% block scripts %}
    
    {% endblock %}
</body>

</html>
