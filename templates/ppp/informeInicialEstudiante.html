{% extends "/ppp/index.html" %}
{% block titulo %} Informe Inicial de Prácticas {% endblock %}
{% block contenido %}
<nav style="--bs-breadcrumb-divider: '>'" aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{{ url_for('router_main.index') }}">Inicio</a></li>
        <li class="breadcrumb-item active"><a href="{{ url_for('router_main.informeInicialEstudiante') }}">Informe de Prácticas</a></li>
    </ol>
</nav>

<div class="container-fluid my-4">
    <div class="card w-100">
        <div class="card-header bg-red-usat text-white">
            Informe Inicial de Prácticas Pre Profesionales
        </div>
        <div class="card-body">
            <form action="" method="POST">
                <!-- Datos del Estudiante -->
                <fieldset>
                    <legend>Datos del Estudiante</legend>
                    <div class="mb-3">
                        <label for="nombre" class="form-label">Nombres:</label>
                        <input type="text" class="form-control" id="nombre" name="nombre" required>
                    </div>
                    <div class="mb-3">
                        <label for="apellidos" class="form-label">Apellidos:</label>
                        <input type="text" class="form-control" id="apellidos" name="apellidos" required>
                    </div>
                    <div class="mb-3">
                        <label for="codigo" class="form-label">Código del Estudiante:</label>
                        <input type="text" class="form-control" id="codigo" name="codigo" required>
                    </div>
                    <div class="mb-3">
                        <label for="semestre" class="form-label">Semestre Académico:</label>
                        <input type="text" class="form-control" id="semestre" name="semestre" required>
                    </div>
                </fieldset>

                <!-- Datos de la Empresa -->
                <fieldset>
                    <legend>Datos de la Empresa/Institución</legend>
                    <div class="mb-3">
                        <label for="empresa" class="form-label">Razón Social de la Empresa:</label>
                        <input type="text" class="form-control" id="empresa" name="empresa" required>
                    </div>
                    <div class="mb-3">
                        <label for="responsable" class="form-label">Nombre del Responsable:</label>
                        <input type="text" class="form-control" id="responsable" name="responsable" required>
                    </div>
                    <div class="mb-3">
                        <label for="cargo" class="form-label">Cargo del Responsable:</label>
                        <input type="text" class="form-control" id="cargo" name="cargo" required>
                    </div>
                </fieldset>

                <!-- Objetivos de la Práctica -->
                <fieldset>
                    <legend>Objetivos de la Práctica</legend>
                    <div class="mb-3">
                        <label for="objetivo1" class="form-label">Objetivo 1:</label>
                        <input type="text" class="form-control" id="objetivo1" name="objetivo1" required>
                    </div>
                    <div class="mb-3">
                        <label for="objetivo2" class="form-label">Objetivo 2:</label>
                        <input type="text" class="form-control" id="objetivo2" name="objetivo2">
                    </div>
                    <div class="mb-3">
                        <label for="objetivo3" class="form-label">Objetivo 3:</label>
                        <input type="text" class="form-control" id="objetivo3" name="objetivo3">
                    </div>
                </fieldset>

                <!-- Fechas de la Práctica -->
                <fieldset>
                    <legend>Duración de la Práctica</legend>
                    <div class="mb-3">
                        <label for="fecha_inicio" class="form-label">Fecha de Inicio:</label>
                        <input type="date" class="form-control" id="fecha_inicio" name="fecha_inicio" required>
                    </div>
                    <div class="mb-3">
                        <label for="fecha_fin" class="form-label">Fecha de Término:</label>
                        <input type="date" class="form-control" id="fecha_fin" name="fecha_fin" required>
                    </div>
                </fieldset>

                <!-- Plan de Trabajo -->
                <fieldset>
                    <legend>Plan de Trabajo</legend>
                    <table class="table table-bordered" id="tabla-plan-trabajo">
                        <thead>
                            <tr>
                                <th style="text-align:center">N° de Semana</th>
                                <th style="text-align:center">Fechas</th>
                                <th style="text-align:center">Actividades a realizar</th>
                                <th style="text-align:center">N° de horas</th>
                                <th style="text-align:center">Opciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="text-align:center">01</td>
                                <td style="text-align:center"><input type="text" class="form-control" placeholder="Fechas"></td>
                                <td style="text-align:center"><input type="text" class="form-control" placeholder="Actividad"></td>
                                <td style="text-align:center"><input type="number" class="form-control" placeholder="Horas"></td>
                                <td style="text-align:center">
                                    <button class="btn btn-danger btn-sm" onclick="eliminarFila(this)">Eliminar</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Botón para abrir el modal -->
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalAgregarFila">
                        Agregar Semana
                    </button>

                    <!-- Modal para agregar nueva fila -->
                    <div class="modal fade" id="modalAgregarFila" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalLabel">Agregar Semana</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form id="formAgregarSemana">
                                        <div class="mb-3">
                                            <label for="numeroSemana" class="form-label">N° de Semana:</label>
                                            <input type="text" class="form-control" id="numeroSemana" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="fechas" class="form-label">Fechas:</label>
                                            <input type="text" class="form-control" id="fechas" placeholder="99/99/2099 al 99/99/2099" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="actividad" class="form-label">Actividad a realizar:</label>
                                            <input type="text" class="form-control" id="actividad" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="horas" class="form-label">N° de horas:</label>
                                            <input type="number" class="form-control" id="horas" required>
                                        </div>
                                        <button type="submit" class="btn btn-success">Agregar</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>

                <button type="submit" class="btn btn-primary">Guardar Informe</button>
            </form>
        </div>
    </div>
</div>

<!-- Scripts de Bootstrap y JQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Script para manejar el agregado dinámico de filas -->
<script>
    // Función para agregar una nueva fila a la tabla
    document.getElementById('formAgregarSemana').addEventListener('submit', function(event) {
        event.preventDefault(); // Evita que se envíe el formulario

        // Obtener los valores del formulario
        var numeroSemana = document.getElementById('numeroSemana').value;
        var fechas = document.getElementById('fechas').value;
        var actividad = document.getElementById('actividad').value;
        var horas = document.getElementById('horas').value;

        // Crear una nueva fila
        var nuevaFila = `
            <tr>
                <td style="text-align:center">${numeroSemana}</td>
                <td style="text-align:center"><input type="text" class="form-control" value="${fechas}"></td>
                <td style="text-align:center"><input type="text" class="form-control" value="${actividad}"></td>
                <td style="text-align:center"><input type="number" class="form-control" value="${horas}"></td>
                <td style="text-align:center">
                    <button class="btn btn-danger btn-sm" onclick="eliminarFila(this)">Eliminar</button>
                </td>
            </tr>
        `;

        // Agregar la nueva fila a la tabla
        document.querySelector('#tabla-plan-trabajo tbody').insertAdjacentHTML('beforeend', nuevaFila);

        // Cerrar el modal
        var modal = bootstrap.Modal.getInstance(document.getElementById('modalAgregarFila'));
        modal.hide();

        // Limpiar el formulario
        document.getElementById('formAgregarSemana').reset();
    });

    // Función para eliminar una fila
    function eliminarFila(btn) {
        var fila = btn.parentNode.parentNode;
        fila.parentNode.removeChild(fila);
    }
</script>

{% endblock %}
