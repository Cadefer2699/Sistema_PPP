{% extends "/ppp/home.html" %}
{% block titulo %} Informe Inicial (Estudiante) {% endblock %}
{% block contenido %}
<nav style="--bs-breadcrumb-divider: '>'" aria-label="breadcrumb">
    <ol class="breadcrumb" style="padding-bottom: 0px; margin-bottom: -10px;">
        <li class="breadcrumb-item"><a href="{{ url_for('router_main.index') }}">Inicio</a></li>
        <li class="breadcrumb-item"><a href="{{ url_for('router_main.practicas_pre_profesionales') }}">Módulo de Prácticas Pre Profesionales</a></li>
        <li class="breadcrumb-item active">Informe Inicial (Estudiante)</li>
    </ol>
</nav>

<style>
    body {
        overflow: auto;
    }
    .scrollable {
        height: 42%;
        overflow-y: auto;
    }
    fieldset {
        margin-bottom: 20px;
        padding-bottom: 15px;
    }
    .form-label {
        margin-bottom: 5px;
    }
    .nav-tabs .nav-link {
        color: black;
        background-color: #f1f1f1;
        border: 1px solid #dee2e6;
        border-radius: 5px 5px 0 0;
    }
    .nav-tabs .nav-link.active {
        color: black;
        background-color: white;
        border-bottom-color: transparent;
    }
    .tab-pane {
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 15px;
        margin-top: 15px;
    }
</style>

<div class="container-fluid my-4">
    <div class="card w-100" style="height: 100%;">
        <div class="card-header bg-red-usat text-white">
            Informe Inicial de Prácticas Pre Profesionales (Estudiante)
        </div>
        <div class="card-body scrollable">
            <form action="" method="POST">
                <!-- Encabezado -->
                <fieldset>
                    <div class="row">
                        <div class="col-2">
                            <label for="semestre" class="form-label">Semestre Académico:</label>
                            <input type="text" class="form-control" id="semestre" name="semestre" required>
                        </div>
                        <div class="col-5">
                            <label for="estudiante" class="form-label">Estudiante:</label>
                            <input type="text" class="form-control" id="estudiante" name="estudiante" required>
                        </div>
                        <div class="col"></div>
                        <div class="col-2">
                            <label for="id" class="form-label">ID:</label>
                            <input type="text" class="form-control" id="id" name="id" required>
                        </div>
                    </div>
                </fieldset>

                <div class="row">
                    <div class="col-md-6">
                        <!-- Tab Datos del Estudiante -->
                        <legend>Datos del Estudiante y Empresa</legend>
                        <ul class="nav nav-tabs" id="datosTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a class="nav-link active" id="estudiante-tab" data-bs-toggle="tab" href="#estudiante" role="tab" aria-controls="estudiante" aria-selected="true">Datos del Estudiante</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="empresa-tab" data-bs-toggle="tab" href="#empresa" role="tab" aria-controls="empresa" aria-selected="false">Datos de la Empresa</a>
                            </li>
                        </ul>

                        <div class="tab-content" id="datosTabContent">
                            <!-- Datos del Estudiante -->
                            <div class="tab-pane fade show active" id="estudiante" role="tabpanel" aria-labelledby="estudiante-tab">
                                <fieldset>
                                    <legend>Datos del Estudiante</legend>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="nombre" class="form-label">Nombres:</label>
                                            <input type="text" class="form-control" id="nombre" name="nombre" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="apellidos" class="form-label">Apellidos:</label>
                                            <input type="text" class="form-control" id="apellidos" name="apellidos" required>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <label for="codigo" class="form-label">Código del Estudiante:</label>
                                            <input type="text" class="form-control" id="codigo" name="codigo" required>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>

                            <!-- Datos de la Empresa -->
                            <div class="tab-pane fade" id="empresa" role="tabpanel" aria-labelledby="empresa-tab">
                                <fieldset>
                                    <legend>Datos de la Empresa</legend>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="empresa" class="form-label">Nombre de la Empresa:</label>
                                            <input type="text" class="form-control" id="empresa" name="empresa" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="nombre_responsable" class="form-label">Nombre del Responsable:</label>
                                            <input type="text" class="form-control" id="nombre_responsable" name="nombre_responsable" required>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <label for="apellido_responsable" class="form-label">Apellido del Responsable:</label>
                                            <input type="text" class="form-control" id="apellido_responsable" name="apellido_responsable" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="cargo_responsable" class="form-label">Cargo:</label>
                                            <input type="text" class="form-control" id="cargo_responsable" name="cargo_responsable" required>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <!-- Tab Duración, Objetivos y Plan de Trabajo -->
                        <legend>Duración de la Práctica, Objetivos y Plan de Trabajo</legend>
                        <ul class="nav nav-tabs" id="practicaTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a class="nav-link active" id="duracion-tab" data-bs-toggle="tab" href="#duracion" role="tab" aria-controls="duracion" aria-selected="true">Duración</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="objetivos-tab" data-bs-toggle="tab" href="#objetivos" role="tab" aria-controls="objetivos" aria-selected="false">Objetivos</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="plan-tab" data-bs-toggle="tab" href="#plan" role="tab" aria-controls="plan" aria-selected="false">Plan de Trabajo</a>
                            </li>
                        </ul>

                        <div class="tab-content" id="practicaTabContent">
                            <!-- Duración de la Práctica -->
                            <div class="tab-pane fade show active" id="duracion" role="tabpanel" aria-labelledby="duracion-tab">
                                <fieldset>
                                    <legend>Duración de la Práctica</legend>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="fecha_inicio" class="form-label">Fecha de Inicio:</label>
                                            <input type="date" class="form-control" id="fecha_inicio" name="fecha_inicio" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="fecha_fin" class="form-label">Fecha de Término:</label>
                                            <input type="date" class="form-control" id="fecha_fin" name="fecha_fin" required>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>

                            <!-- Objetivos de la Práctica -->
                            <div class="tab-pane fade" id="objetivos" role="tabpanel" aria-labelledby="objetivos-tab">
                                <fieldset>
                                    <legend>Objetivos de la Práctica</legend>
                                    <button type="button" class="btn btn-primary btn-sm" id="agregarObjetivo" style="margin-left: 10px;">+</button>
                                    <table class="table table-bordered" id="tabla-objetivos">
                                        <thead>
                                            <tr>
                                                <th>Número</th>
                                                <th>Objetivo</th>
                                                <th>Opciones</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><input type="text" class="form-control" name="numero_objetivo[]" placeholder="1" required></td>
                                                <td><input type="text" class="form-control" name="objetivo[]" placeholder="Descripción del objetivo" required></td>
                                                <td><button class="btn btn-danger btn-sm" onclick="eliminarFilaObjetivo(this)">Eliminar</button></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </fieldset>
                            </div>

                            <!-- Plan de Trabajo -->
                            <div class="tab-pane fade" id="plan" role="tabpanel" aria-labelledby="plan-tab">
                                <fieldset>
                                    <legend>Plan de Trabajo</legend>
                                    <button type="button" class="btn btn-primary btn-sm" id="agregarPlanTrabajo" style="margin-left: 10px;">+</button>
                                    <table class="table table-bordered" id="tabla-plan-trabajo">
                                        <thead>
                                            <tr>
                                                <th>Semana</th>
                                                <th>Fechas</th>
                                                <th>Actividades</th>
                                                <th>Horas</th>
                                                <th>Opciones</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><input type="text" class="form-control" name="semana[]" placeholder="1" required></td>
                                                <td>
                                                    <input type="date" class="form-control" name="fecha_inicio[]" required>
                                                    <input type="date" class="form-control" name="fecha_fin[]" required>
                                                </td>
                                                <td><input type="text" class="form-control" name="actividad[]" placeholder="Descripción de la actividad" required></td>
                                                <td><input type="number" class="form-control" name="horas[]" placeholder="Horas" required></td>
                                                <td><button class="btn btn-danger btn-sm" onclick="eliminarFilaPlan(this)">Eliminar</button></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </fieldset>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-end">
                    <button type="submit" class="btn btn-primary mt-3">Guardar Informe</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Función para agregar una nueva fila de objetivo a la tabla
    document.getElementById('agregarObjetivo').addEventListener('click', function() {
        var nuevaFila = `<tr>
            <td><input type="text" class="form-control" name="numero_objetivo[]" placeholder="Número" required></td>
            <td><input type="text" class="form-control" name="objetivo[]" placeholder="Descripción del objetivo" required></td>
            <td><button class="btn btn-danger btn-sm" onclick="eliminarFilaObjetivo(this)">Eliminar</button></td>
        </tr>`;
        document.querySelector('#tabla-objetivos tbody').insertAdjacentHTML('beforeend', nuevaFila);
    });

    function eliminarFilaObjetivo(btn) {
        btn.closest('tr').remove();
    }

    document.getElementById('agregarPlanTrabajo').addEventListener('click', function() {
        var nuevaFila = `<tr>
            <td><input type="text" class="form-control" name="semana[]" placeholder="Número de Semana" required></td>
            <td>
                <input type="date" class="form-control" name="fecha_inicio[]" required>
                <input type="date" class="form-control" name="fecha_fin[]" required>
            </td>
            <td><input type="text" class="form-control" name="actividad[]" placeholder="Descripción de la actividad" required></td>
            <td><input type="number" class="form-control" name="horas[]" placeholder="Horas" required></td>
            <td><button class="btn btn-danger btn-sm" onclick="eliminarFilaPlan(this)">Eliminar</button></td>
        </tr>`;
        document.querySelector('#tabla-plan-trabajo tbody').insertAdjacentHTML('beforeend', nuevaFila);
    });

    function eliminarFilaPlan(btn) {
        btn.closest('tr').remove();
    }
</script>

{% endblock %}
