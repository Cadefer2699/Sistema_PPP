{% extends "/ppp/home.html" %}
{% block titulo %} Informe Inicial (Empresa) {% endblock %}
{% block contenido %}
<nav style="--bs-breadcrumb-divider: '>'" aria-label="breadcrumb">
    <ol class="breadcrumb" style="padding-bottom: 0px; margin-bottom: -10px;">
        <li class="breadcrumb-item"><a href="{{ url_for('router_main.index') }}">Inicio</a></li>
        <li class="breadcrumb-item"><a href="{{ url_for('router_main.practicas_pre_profesionales') }}">Módulo de Prácticas Pre Profesionales</a></li>
        <li class="breadcrumb-item active">Informe Inicial (Empresa)</li>
    </ol>
</nav>
<style>
    body {
        overflow: hidden;
    }

    .container-fluid {
        padding: 20px;
    }

    fieldset {
        margin-bottom: 20px;
        padding: 15px;
    }

    legend {
        font-size: 1.2rem;
        font-weight: bold;
        padding-bottom: 10px;
    }

    .form-label {
        margin-bottom: 5px;
    }

    .row > div {
        margin-bottom: 15px;
    }

    .card-body {
        padding: 20px;
    }

    table {
        margin-top: 10px;
    }

    /* Estilo para tablas */
    .col-labores {
        width: 80%;
    }
</style>
<div class="container-fluid my-4 scrollable">
    <div class="card w-100">
        <div class="card-header bg-red-usat text-white">
            Informe Inicial de Prácticas Pre Profesionales (Empresa)
        </div>
        <div class="card-body">
            <form action="" method="POST">
                <!-- Datos de la Empresa/Institución -->
                <fieldset>
                    <legend>Datos de la Empresa/Institución</legend>
                    <div class="row">
                        <div class="col-md-3">
                            <label for="nombre_empresa" class="form-label">Razón Social de la Empresa:</label>
                            <input type="text" class="form-control" id="nombre_empresa" name="nombre_empresa" required>
                        </div>
                        <div class="col-md-3">
                            <label for="responsable" class="form-label">Nombre del Responsable:</label>
                            <input type="text" class="form-control" id="responsable" name="responsable" required>
                        </div>
                        <div class="col-md-3">
                            <label for="apellido_responsable" class="form-label">Apellido del Responsable:</label>
                            <input type="text" class="form-control" id="apellido_responsable" name="apellido_responsable" required>
                        </div>
                        <div class="col-md-3">
                            <label for="cargo_responsable" class="form-label">Cargo del Responsable:</label>
                            <input type="text" class="form-control" id="cargo_responsable" name="cargo_responsable" required>
                        </div>
                    </div>
                </fieldset>

                <!-- Datos del Estudiante -->
                <fieldset>
                    <legend>Datos del Estudiante</legend>
                    <div class="row">
                        <div class="col-md-3">
                            <label for="nombre_estudiante" class="form-label">Nombres del Estudiante:</label>
                            <input type="text" class="form-control" id="nombre_estudiante" name="nombre_estudiante" required>
                        </div>
                        <div class="col-md-3">
                            <label for="apellido_estudiante" class="form-label">Apellidos del Estudiante:</label>
                            <input type="text" class="form-control" id="apellido_estudiante" name="apellido_estudiante" required>
                        </div>
                        <div class="col-md-3">
                            <label for="fecha_inicio" class="form-label">Fecha de Inicio de la Práctica:</label>
                            <input type="date" class="form-control" id="fecha_inicio" name="fecha_inicio" required>
                        </div>
                        <div class="col-md-3">
                            <label for="fecha_fin" class="form-label">Fecha de Término de la Práctica:</label>
                            <input type="date" class="form-control" id="fecha_fin" name="fecha_fin" required>
                        </div>
                    </div>
                </fieldset>

                <!-- Aceptación y Compromiso -->
                <fieldset>
                    <legend>Aceptación y Compromiso</legend>
                    <div class="mb-3">
                        <label for="aceptacion" class="form-label">Aceptación y compromiso de la empresa para atender al estudiante:</label>
                        <textarea class="form-control" id="aceptacion" name="aceptacion" rows="3" required></textarea>
                    </div>
                </fieldset>

                <!-- Descripción de las labores del practicante -->
                <fieldset>
                    <legend>
                        Labores del Practicante
                        <button type="button" class="btn btn-primary btn-sm" id="agregarLabor" style="margin-left: 10px; font-size: 1.2rem; font-weight: bold;">+</button>
                    </legend>
                    <table class="table table-bordered" id="tabla-labores">
                        <thead>
                            <tr>
                                <th class="col-labores" style="text-align:center">Descripción de la labor</th>
                                <th style="text-align:center">Opciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="text" class="form-control" name="labores[]" placeholder="Descripción de la labor" required></td>
                                <td style="text-align:center">
                                    <button class="btn btn-danger btn-sm" onclick="eliminarFilaLabor(this)">Eliminar</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </fieldset>

                <button type="submit" class="btn btn-primary">Guardar Informe</button>
            </form>
        </div>
    </div>
</div>

<!-- Scripts de Bootstrap y JQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Script para manejar el agregado dinámico de labores del practicante -->
<script>
    // Función para agregar una nueva fila de labor a la tabla
    document.getElementById('agregarLabor').addEventListener('click', function() {
        var nuevaFila = `
            <tr>
                <td><input type="text" class="form-control" name="labores[]" placeholder="Descripción de la labor" required></td>
                <td style="text-align:center">
                    <button class="btn btn-danger btn-sm" onclick="eliminarFilaLabor(this)">Eliminar</button>
                </td>
            </tr>
        `;
        document.querySelector('#tabla-labores tbody').insertAdjacentHTML('beforeend', nuevaFila);
    });

    // Función para eliminar una fila de labor
    function eliminarFilaLabor(btn) {
        var fila = btn.closest('tr');
        fila.remove();
    }
</script>
{% endblock %}
